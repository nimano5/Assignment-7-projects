{% extends "base.html" %}

{% block title %}Contact - {{ personal_info.name }}{% endblock %}

{% block content %}
<section class="page-header">
    <h2>Let's Connect!</h2>
    <p class="contact-subtitle">Whether it's discussing new opportunities, tech innovations, or simply swapping creative ideas ‚Äî I'd love to hear from you.</p>
</section>

<section class="contact-content">
    <div class="contact-info">
        <h3>Get In Touch</h3>
        <div class="contact-methods">
            <div class="contact-method">
                <h4>üìß Email</h4>
                <a href="mailto:{{ personal_info.email }}">{{ personal_info.email }}</a>
            </div>
            <div class="contact-method">
                <h4>üåê LinkedIn</h4>
                <a href="{{ personal_info.linkedin }}" target="_blank">linkedin.com/in/thomas-nikitha</a>
            </div>
            <div class="contact-method">
                <h4>üíª GitHub</h4>
                <a href="{{ personal_info.github }}" target="_blank">github.com/nimano5/AiDD-nimano-lab01</a>
            </div>
            <div class="contact-method">
                <h4>üìç Location</h4>
                <p>{{ personal_info.location }}</p>
            </div>
        </div>
    </div>

    <div class="contact-form-section">
        <h3>Send Me a Message</h3>
        
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        
        <form id="contactForm" action="{{ url_for('contact') }}" method="POST" novalidate>
            <div class="form-group">
                <label for="firstName">First Name *</label>
                <input type="text" id="firstName" name="firstName" required>
                <span class="error-message" id="firstNameError"></span>
            </div>

            <div class="form-group">
                <label for="lastName">Last Name *</label>
                <input type="text" id="lastName" name="lastName" required>
                <span class="error-message" id="lastNameError"></span>
            </div>

            <div class="form-group">
                <label for="email">Email Address *</label>
                <input type="email" id="email" name="email" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$">
                <span class="error-message" id="emailError"></span>
            </div>

            <div class="form-group">
                <label for="password">Password *</label>
                <input type="password" id="password" name="password" required minlength="8">
                <span class="error-message" id="passwordError"></span>
            </div>

            <div class="form-group">
                <label for="confirmPassword">Confirm Password *</label>
                <input type="password" id="confirmPassword" name="confirmPassword" required>
                <span class="error-message" id="confirmPasswordError"></span>
            </div>

            <div class="form-group">
                <label for="message">Message</label>
                <textarea id="message" name="message" rows="5" placeholder="Tell me about your project, opportunity, or just say hello!"></textarea>
            </div>

            <button type="submit" class="submit-button">Send Message</button>
        </form>
    </div>
</section>

<section class="availability-section">
    <h3>Availability</h3>
    <div class="availability-info">
        <p>I'm currently available for:</p>
        <ul>
            <li>Full-time opportunities in Information Systems</li>
            <li>Internship programs in tech and analytics</li>
            <li>Collaborative projects and consulting</li>
            <li>Networking and professional discussions</li>
        </ul>
        <p class="response-time">I typically respond to messages within 24-48 hours.</p>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    // Form validation
    document.getElementById('contactForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Clear previous errors
        clearErrors();
        
        let isValid = true;
        
        // Validate first name
        const firstName = document.getElementById('firstName').value.trim();
        if (!firstName) {
            showError('firstNameError', 'First name is required');
            isValid = false;
        }
        
        // Validate last name
        const lastName = document.getElementById('lastName').value.trim();
        if (!lastName) {
            showError('lastNameError', 'Last name is required');
            isValid = false;
        }
        
        // Validate email
        const email = document.getElementById('email').value.trim();
        const emailPattern = /^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/i;
        if (!email) {
            showError('emailError', 'Email address is required');
            isValid = false;
        } else if (!emailPattern.test(email)) {
            showError('emailError', 'Please enter a valid email address');
            isValid = false;
        }
        
        // Validate password
        const password = document.getElementById('password').value;
        if (!password) {
            showError('passwordError', 'Password is required');
            isValid = false;
        } else if (password.length < 8) {
            showError('passwordError', 'Password must be at least 8 characters long');
            isValid = false;
        }
        
        // Validate confirm password
        const confirmPassword = document.getElementById('confirmPassword').value;
        if (!confirmPassword) {
            showError('confirmPasswordError', 'Please confirm your password');
            isValid = false;
        } else if (password !== confirmPassword) {
            showError('confirmPasswordError', 'Passwords do not match');
            isValid = false;
        }
        
        if (isValid) {
            // Submit the form
            this.submit();
        }
    });
    
    function showError(elementId, message) {
        document.getElementById(elementId).textContent = message;
        document.getElementById(elementId).style.display = 'block';
    }
    
    function clearErrors() {
        const errorElements = document.querySelectorAll('.error-message');
        errorElements.forEach(element => {
            element.textContent = '';
            element.style.display = 'none';
        });
    }
</script>
{% endblock %}
